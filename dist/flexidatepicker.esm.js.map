{"version":3,"file":"flexidatepicker.esm.js","sources":["../src/flexidatepicker.js"],"sourcesContent":["/**\n * FlexiDatepicker\n * A lightweight, dependency-free JavaScript date picker supporting single, multiple, range, and multi-range selection modes.\n *\n * @version 1.0.0\n * @license MIT\n * @author\n *   Leo Anang Miftahul Huda\n *\n **/\nexport default class FlexiDatepicker {\n    constructor(inputSelector, options = {}) {\n        this.inputElement = document.querySelector(inputSelector);\n        if (!this.inputElement) {\n            console.error(\"FlexiDatepicker: Input element not found.\");\n            return;\n        }\n        this.options = {\n            mode: 'single',\n            showClearAll: true,\n            dateFormat: 'MMM d, yyyy',\n            locale: 'en-US',\n            showSelectWeekdays: true,\n            showSelectWeekends: true,\n            showSelectAllDays: true,\n            disabledDates: [],\n            disablePast: false,\n            disableFuture: false,\n            minDate: null,\n            maxDate: null,\n            ...options\n        };\n        this.selectedDisplay = this.options.selectedDatesDisplaySelector\n            ? document.querySelector(this.options.selectedDatesDisplaySelector)\n            : null;\n        this.currentDate = new Date();\n        this.ranges = [];\n        this.selectedDates = [];\n        this.currentRangeStart = null;\n        this.todayString = new Date().toISOString().split('T')[0];\n        this.datepickerElement = this.buildUI();\n        document.body.appendChild(this.datepickerElement);\n        this.show = this.show.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.attachEventListeners();\n        this.renderCalendar();\n    }\n    buildUI() {\n        const datepickerEl = document.createElement('div');\n        datepickerEl.className = 'mrdp-container';\n        const showMultiControls = this.options.mode === 'multiple' || this.options.mode === 'multi-range';\n        let selectionControlsHTML = '';\n        if (showMultiControls) {\n            let buttons = [];\n            if (this.options.showSelectWeekdays) buttons.push('<button id=\"mrdp-select-weekdays\">Select Weekdays</button>');\n            if (this.options.showSelectWeekends) buttons.push('<button id=\"mrdp-select-weekends\">Select Weekends</button>');\n            if (this.options.showSelectAllDays) buttons.push('<button id=\"mrdp-select-all-days\">Select All Days</button>');\n            const gridCols = `repeat(${buttons.length}, 1fr)`;\n            if (buttons.length > 0) {\n                selectionControlsHTML = `\n                <div class=\"mrdp-controls\" style=\"grid-template-columns: ${gridCols};\">\n                    ${buttons.join('')}\n                </div>`;\n            }\n        }\n        let clearButtonHTML = '';\n        if (this.options.showClearAll) {\n            clearButtonHTML = `\n            <div class=\"mrdp-controls\">\n                 <button id=\"mrdp-clear-all\" class=\"mrdp-btn-clear\">Clear All Selections</button>\n            </div>`;\n        }\n\n\n        const weekdayFormatter = new Intl.DateTimeFormat(this.options.locale, { weekday: 'short' });\n        const weekdayHeaders = [];\n        const tempDate = new Date(2020, 5, 7);\n        for (let i = 0; i < 7; i++) {\n            const dayName = weekdayFormatter.format(new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate() + i));\n            weekdayHeaders.push(`<div class=\"mrdp-day-header\">${dayName}</div>`);\n        }\n\n        datepickerEl.innerHTML = `\n            <div class=\"mrdp-header\">\n                <button id=\"mrdp-prev-month-btn\" class=\"mrdp-nav-btn\">&lt;</button>\n                <h3 id=\"mrdp-current-month-year\"></h3>\n                <button id=\"mrdp-next-month-btn\" class=\"mrdp-nav-btn\">&gt;</button>\n            </div>\n            <div class=\"mrdp-grid\">\n                ${weekdayHeaders.join('')}\n            </div>\n            ${selectionControlsHTML}\n            ${clearButtonHTML}\n        `;\n        this.grid = datepickerEl.querySelector('.mrdp-grid');\n        this.monthYearEl = datepickerEl.querySelector('#mrdp-current-month-year');\n        datepickerEl.querySelector('#mrdp-prev-month-btn').addEventListener('click', () => this.handlePrevMonth());\n        datepickerEl.querySelector('#mrdp-next-month-btn').addEventListener('click', () => this.handleNextMonth());\n        if (showMultiControls) {\n            if (this.options.showSelectWeekdays) datepickerEl.querySelector('#mrdp-select-weekdays').addEventListener('click', () => this.handleSelectWeekdays());\n            if (this.options.showSelectWeekends) datepickerEl.querySelector('#mrdp-select-weekends').addEventListener('click', () => this.handleSelectWeekends());\n            if (this.options.showSelectAllDays) datepickerEl.querySelector('#mrdp-select-all-days').addEventListener('click', () => this.handleSelectAllDays());\n        }\n        if (this.options.showClearAll) datepickerEl.querySelector('#mrdp-clear-all').addEventListener('click', () => this.handleClearAll());\n        return datepickerEl;\n    }\n\n    attachEventListeners() {\n        this.inputElement.addEventListener('click', this.show);\n        document.addEventListener('mousedown', this.handleOutsideClick);\n    }\n\n    show() {\n        if (this.datepickerElement.classList.contains('mrdp-visible')) return;\n\n        const rect = this.inputElement.getBoundingClientRect();\n\n        this.datepickerElement.style.top = `${rect.bottom + window.scrollY + 5}px`;\n        this.datepickerElement.style.left = `${rect.left + window.scrollX}px`;\n\n        this.datepickerElement.classList.add('mrdp-visible');\n    }\n\n    hide() {\n        this.datepickerElement.classList.remove('mrdp-visible');\n    }\n\n    handleOutsideClick(e) {\n        if (e.target === this.inputElement) return;\n        if (this.datepickerElement.contains(e.target)) return;\n        this.hide();\n    }\n\n    renderCalendar() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n\n        const dayHeaders = this.grid.querySelectorAll('.mrdp-day-header');\n        this.grid.innerHTML = '';\n        dayHeaders.forEach(header => this.grid.appendChild(header));\n\n        this.monthYearEl.textContent = new Date(year, month).toLocaleString(this.options.locale, {\n            month: 'long',\n            year: 'numeric'\n        });\n\n        const firstDayOfMonth = new Date(year, month, 1).getDay();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        for (let i = 0; i < firstDayOfMonth; i++) {\n            const emptyCell = document.createElement('div');\n            emptyCell.classList.add('mrdp-day-cell', 'empty');\n            this.grid.appendChild(emptyCell);\n        }\n\n        for (let day = 1; day <= daysInMonth; day++) {\n\n            const date = new Date(year, month, day);\n            const dateString = this._getDateString(year, month, day);\n            const dayCell = document.createElement('div');\n            dayCell.classList.add('mrdp-day-cell');\n            dayCell.textContent = day;\n            dayCell.dataset.date = dateString;\n\n            const disabled = this.isDateDisabled(date);\n            if (disabled) dayCell.classList.add('disabled');\n\n            if (dateString === this.todayString) dayCell.classList.add('today');\n\n            this._applySelectionStyles(dayCell, dateString);\n\n            if (!disabled) {\n                dayCell.addEventListener('click', () => this.handleDateClick(dateString));\n            }\n\n            this.grid.appendChild(dayCell);\n        }\n    }\n\n    _applySelectionStyles(dayCell, dateString) {\n        if (this.options.mode === 'single' || this.options.mode === 'multiple') {\n            if (this.selectedDates.includes(dateString)) {\n                dayCell.classList.add('selected-start', 'selected-end');\n            }\n            return;\n        }\n        let isStart = false, isEnd = false, inRange = false;\n        for (const range of this.ranges) {\n            if (dateString === range.start) isStart = true;\n            if (dateString === range.end) isEnd = true;\n            if (dateString > range.start && dateString < range.end) inRange = true;\n            if (dateString === range.start && dateString === range.end) isStart = isEnd = true;\n        }\n        if (isStart && isEnd) dayCell.classList.add('selected-start', 'selected-end');\n        else if (isStart) dayCell.classList.add('selected-start');\n        else if (isEnd) dayCell.classList.add('selected-end');\n        else if (inRange) dayCell.classList.add('in-range');\n        if (dateString === this.currentRangeStart) {\n            dayCell.classList.add('pending-start');\n        }\n    }\n\n    handleDateClick(dateString) {\n        switch (this.options.mode) {\n            case 'single':\n                this._handleSingleClick(dateString);\n                break;\n            case 'multiple':\n                this._handleMultipleClick(dateString);\n                break;\n            case 'range':\n                this._handleRangeClick(dateString);\n                break;\n            case 'multi-range':\n                this._handleFlexiClick(dateString);\n                break;\n        }\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    _handleSingleClick(dateString) {\n        this.selectedDates = [dateString];\n        this.hide();\n    }\n\n    _handleMultipleClick(dateString) {\n        const index = this.selectedDates.indexOf(dateString);\n        if (index > -1) {\n            this.selectedDates.splice(index, 1);\n        } else {\n            this.selectedDates.push(dateString);\n        }\n    }\n\n    _handleRangeClick(dateString) {\n        if (this.currentRangeStart === null) {\n            this.currentRangeStart = dateString;\n            this.ranges = [];\n        } else {\n            let startDate = this.currentRangeStart, endDate = dateString;\n            this.currentRangeStart = null;\n            if (endDate < startDate) [startDate, endDate] = [endDate, startDate];\n\n            this.ranges = [{ start: startDate, end: endDate }];\n        }\n    }\n\n    _handleFlexiClick(dateString) {\n        const clickedRangeIndex = this.ranges.findIndex(range =>\n            dateString >= range.start && dateString <= range.end\n        );\n\n        if (clickedRangeIndex > -1) {\n            const clickedRange = this.ranges[clickedRangeIndex];\n            this.ranges.splice(clickedRangeIndex, 1);\n\n            const beforeDate = this.addDay(dateString, -1);\n            const afterDate = this.addDay(dateString, 1);\n\n            if (clickedRange.start === dateString) {\n                if (afterDate <= clickedRange.end) this.ranges.push({ start: afterDate, end: clickedRange.end });\n            } else if (clickedRange.end === dateString) {\n                if (beforeDate >= clickedRange.start) this.ranges.push({ start: clickedRange.start, end: beforeDate });\n            } else {\n                if (beforeDate >= clickedRange.start) this.ranges.push({ start: clickedRange.start, end: beforeDate });\n                if (afterDate <= clickedRange.end) this.ranges.push({ start: afterDate, end: clickedRange.end });\n            }\n            this.currentRangeStart = null;\n        } else if (this.currentRangeStart === null) {\n            this.currentRangeStart = dateString;\n        } else {\n            let startDate = this.currentRangeStart, endDate = dateString;\n            this.currentRangeStart = null;\n            if (endDate < startDate) [startDate, endDate] = [endDate, startDate];\n\n            this.ranges.push({ start: startDate, end: endDate });\n            this.simplifyRanges();\n        }\n    }\n\n    handlePrevMonth() {\n        let newMonth = this.currentDate.getMonth() - 1;\n        let newYear = this.currentDate.getFullYear();\n        if (newMonth < 0) {\n            newMonth = 11;\n            newYear -= 1;\n        }\n        this.currentDate = new Date(newYear, newMonth, 1);\n        this.renderCalendar();\n    }\n\n    handleNextMonth() {\n        let newMonth = this.currentDate.getMonth() + 1;\n        let newYear = this.currentDate.getFullYear();\n        if (newMonth > 11) {\n            newMonth = 0;\n            newYear += 1;\n        }\n        this.currentDate = new Date(newYear, newMonth, 1);\n        this.renderCalendar();\n    }\n\n    handleSelectAllDays() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        if (this.options.mode === 'multiple') {\n            for (let day = 1; day <= daysInMonth; day++) {\n                const dateString = this._getDateString(year, month, day);\n                if (!this.selectedDates.includes(dateString)) {\n                    this.selectedDates.push(dateString);\n                }\n            }\n        } else if (this.options.mode === 'multi-range') {\n            const firstDayString = this._getDateString(year, month, 1);\n            const lastDayString = this._getDateString(year, month, daysInMonth);\n            this.addRanges([{ start: firstDayString, end: lastDayString }]);\n        }\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleSelectWeekdays() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        const newRanges = [];\n        const newDates = [];\n\n        for (let day = 1; day <= daysInMonth; day++) {\n            const date = new Date(year, month, day);\n            const dayOfWeek = date.getDay();\n            const dateString = this._getDateString(year, month, day);\n\n            const isWeekday = dayOfWeek >= 1 && dayOfWeek <= 5;\n\n            if (isWeekday) {\n                if (this.options.mode === 'multiple' && !this.selectedDates.includes(dateString)) {\n                    newDates.push(dateString);\n                } else if (this.options.mode === 'multi-range' && !this.isDateInRange(dateString)) {\n                    newRanges.push({ start: dateString, end: dateString });\n                }\n            }\n        }\n\n        if (this.options.mode === 'multiple') this.selectedDates.push(...newDates);\n        if (this.options.mode === 'multi-range') this.addRanges(newRanges);\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleSelectWeekends() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        const newRanges = [];\n        const newDates = [];\n\n        for (let day = 1; day <= daysInMonth; day++) {\n            const date = new Date(year, month, day);\n            const dayOfWeek = date.getDay();\n            const dateString = this._getDateString(year, month, day);\n\n            const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n\n            if (isWeekend) {\n                if (this.options.mode === 'multiple' && !this.selectedDates.includes(dateString)) {\n                    newDates.push(dateString);\n                } else if (this.options.mode === 'multi-range' && !this.isDateInRange(dateString)) {\n                    newRanges.push({ start: dateString, end: dateString });\n                }\n            }\n        }\n\n        if (this.options.mode === 'multiple') this.selectedDates.push(...newDates);\n        if (this.options.mode === 'multi-range') this.addRanges(newRanges);\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleClearAll() {\n        this.ranges = [];\n        this.selectedDates = [];\n        this.currentRangeStart = null;\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    updateSelectedDisplay() {\n        this._updateInputValue();\n        if (this.selectedDisplay) {\n            this._updateExternalDisplay();\n        }\n        if (this.options.onSelectionChange && typeof this.options.onSelectionChange === 'function') {\n            this.options.onSelectionChange({\n                ranges: this.ranges,\n                dates: this.selectedDates\n            });\n        }\n    }\n    \n    _updateInputValue() {\n        if (this.options.mode === 'single') {\n            if (this.selectedDates.length === 0) {\n                this.inputElement.value = '';\n            } else {\n                this.inputElement.value = this.formatDate(this.selectedDates[0]);\n            }\n        } else if (this.options.mode === 'multiple') {\n            if (this.selectedDates.length === 0) {\n                this.inputElement.value = '';\n            } else if (this.selectedDates.length === 1) {\n                this.inputElement.value = this.formatDate(this.selectedDates[0]);\n            } else {\n                this.inputElement.value = `${this.selectedDates.length} Dates Selected`;\n            }\n        } else if (this.options.mode === 'range') {\n            if (this.ranges.length === 0) {\n                this.inputElement.value = '';\n            } else {\n                const range = this.ranges[0];\n                const start = this.formatDate(range.start);\n                const end = this.formatDate(range.end);\n                this.inputElement.value = (start === end) ? start : `${start} - ${end}`;\n            }\n        } else if (this.options.mode === 'multi-range') {\n            if (this.ranges.length === 0) {\n                this.inputElement.value = '';\n            } else if (this.ranges.length === 1) {\n                const range = this.ranges[0];\n                const start = this.formatDate(range.start);\n                const end = this.formatDate(range.end);\n                this.inputElement.value = (start === end) ? start : `${start} - ${end}`;\n            } else {\n                this.inputElement.value = `${this.ranges.length} Ranges Selected`;\n            }\n        }\n    }\n\n    _updateExternalDisplay() {\n        let html = '';\n        this.selectedDates.sort();\n        this.ranges.sort((a, b) => a.start.localeCompare(b.start));\n\n        if (this.selectedDates.length === 0 && this.ranges.length === 0 && !this.currentRangeStart) {\n            this.selectedDisplay.innerHTML = 'None';\n            return;\n        }\n        this.selectedDates.forEach(dateStr => {\n            html += `<div>${this.formatDate(dateStr, true)}</div>`;\n        });\n\n        this.ranges.forEach(range => {\n            const start = this.formatDate(range.start, true);\n            const end = this.formatDate(range.end, true);\n            if (start === end) html += `<div>${start}</div>`;\n            else html += `<div>${start} &mdash; ${end}</div>`;\n        });\n\n        if (this.currentRangeStart) {\n            const start = this.formatDate(this.currentRangeStart, true);\n            html += `<div><em>Selecting range from: ${start}...</em></div>`;\n        }\n\n        this.selectedDisplay.innerHTML = html;\n    }\n\n    formatDate(dateString, showYear = false) {\n        const date = new Date(dateString + 'T00:00:00');\n        const fmt = this.options.dateFormat || 'MMM d, yyyy';\n        return this.formatCustomDate(date, fmt);\n    }\n\n    formatCustomDate(date, format) {\n        const day = date.getDate();\n        const month = date.getMonth() + 1;\n        const year = date.getFullYear();\n\n        const pad = (n) => n.toString().padStart(2, '0');\n\n        const locale = this.options.locale || 'en-US';\n        const monthNameShort = new Intl.DateTimeFormat(locale, { month: 'short' }).format(date);\n        const monthNameLong = new Intl.DateTimeFormat(locale, { month: 'long' }).format(date);\n\n        return format\n            .replace(/dd/g, pad(day))\n            .replace(/d(?![a-z])/g, day)\n            .replace(/MMMM/g, monthNameLong)\n            .replace(/MMM/g, monthNameShort)\n            .replace(/MM/g, pad(month))\n            .replace(/M(?![a-z])/g, month)\n            .replace(/yyyy/g, year)\n            .replace(/yy/g, String(year).slice(-2));\n    }\n\n    addDay(dateString, days) {\n        const date = new Date(dateString + 'T00:00:00');\n        date.setDate(date.getDate() + days);\n        return this._getDateString(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n\n    _getDateString(year, month, day) {\n        return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n    }\n\n\n    isDateInRange(dateString) {\n        return this.ranges.some(range => dateString >= range.start && dateString <= range.end);\n    }\n\n    isDateDisabled(date) {\n        const d = date.toISOString().split('T')[0];\n        if (this.options.disabledDates.some(dis => dis === d)) {\n            return true;\n        }\n        for (const item of this.options.disabledDates) {\n            if (item && item.from && item.to) {\n                if (d >= item.from && d <= item.to) return true;\n            }\n        }\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        if (this.options.disablePast && date < today) return true;\n        if (this.options.disableFuture && date > today) return true;\n        if (this.options.minDate && d < this.options.minDate) return true;\n        if (this.options.maxDate && d > this.options.maxDate) return true;\n\n        return false;\n    }\n\n\n    simplifyRanges() {\n        if (this.ranges.length < 2) return;\n        this.ranges.sort((a, b) => a.start.localeCompare(b.start));\n\n        const simplified = [this.ranges[0]];\n        for (let i = 1; i < this.ranges.length; i++) {\n            const current = this.ranges[i];\n            const last = simplified[simplified.length - 1];\n            const adjacentDate = this.addDay(last.end, 1);\n\n            if (current.start <= last.end || current.start === adjacentDate) {\n                last.end = current.end > last.end ? current.end : last.end;\n            } else {\n                simplified.push(current);\n            }\n        }\n        this.ranges = simplified;\n    }\n\n\n    addRanges(newRanges) {\n        for (const newRange of newRanges) {\n            const isContained = this.ranges.some(\n                r => newRange.start >= r.start && newRange.end <= r.end\n            );\n            if (!isContained) {\n                this.ranges.push(newRange);\n            }\n        }\n        this.simplifyRanges();\n    }\n}"],"names":["FlexiDatepicker","inputSelector","options","arguments","length","undefined","_classCallCheck","inputElement","document","querySelector","console","error","_objectSpread","mode","showClearAll","dateFormat","locale","showSelectWeekdays","showSelectWeekends","showSelectAllDays","disabledDates","disablePast","disableFuture","minDate","maxDate","selectedDisplay","selectedDatesDisplaySelector","currentDate","Date","ranges","selectedDates","currentRangeStart","todayString","toISOString","split","datepickerElement","buildUI","body","appendChild","show","bind","handleOutsideClick","attachEventListeners","renderCalendar","_createClass","key","value","_this","datepickerEl","createElement","className","showMultiControls","selectionControlsHTML","buttons","push","gridCols","concat","join","clearButtonHTML","weekdayFormatter","Intl","DateTimeFormat","weekday","weekdayHeaders","tempDate","i","dayName","format","getFullYear","getMonth","getDate","innerHTML","grid","monthYearEl","addEventListener","handlePrevMonth","handleNextMonth","handleSelectWeekdays","handleSelectWeekends","handleSelectAllDays","handleClearAll","classList","contains","rect","getBoundingClientRect","style","top","bottom","window","scrollY","left","scrollX","add","hide","remove","e","target","_this2","year","month","dayHeaders","querySelectorAll","forEach","header","textContent","toLocaleString","firstDayOfMonth","getDay","daysInMonth","emptyCell","_loop","date","day","dateString","_getDateString","dayCell","dataset","disabled","isDateDisabled","_applySelectionStyles","handleDateClick","includes","isStart","isEnd","inRange","_iterator","_createForOfIteratorHelper","_step","s","n","done","range","start","end","err","f","_handleSingleClick","_handleMultipleClick","_handleRangeClick","_handleFlexiClick","updateSelectedDisplay","index","indexOf","splice","startDate","endDate","_ref","clickedRangeIndex","findIndex","clickedRange","beforeDate","addDay","afterDate","_ref2","simplifyRanges","newMonth","newYear","firstDayString","lastDayString","addRanges","_this$selectedDates","newRanges","newDates","dayOfWeek","isWeekday","isDateInRange","apply","_this$selectedDates2","isWeekend","_updateInputValue","_updateExternalDisplay","onSelectionChange","dates","formatDate","_this3","html","sort","a","b","localeCompare","dateStr","fmt","formatCustomDate","pad","toString","padStart","monthNameShort","monthNameLong","replace","String","slice","days","setDate","some","d","dis","_iterator2","_step2","item","from","to","today","setHours","simplified","current","last","adjacentDate","_this4","_iterator3","_step3","_loop2","newRange","isContained","r"],"mappings":"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"}