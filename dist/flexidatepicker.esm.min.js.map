{"version":3,"file":"flexidatepicker.esm.min.js","sources":["../src/flexidatepicker.js"],"sourcesContent":["/**\n * FlexiDatepicker\n * A lightweight, dependency-free JavaScript date picker supporting single, multiple, range, and multi-range selection modes.\n *\n * @version 1.0.0\n * @license MIT\n * @author\n *   Leo Anang Miftahul Huda\n *\n **/\nexport default class FlexiDatepicker {\n    constructor(inputSelector, options = {}) {\n        this.inputElement = document.querySelector(inputSelector);\n        if (!this.inputElement) {\n            console.error(\"FlexiDatepicker: Input element not found.\");\n            return;\n        }\n        this.options = {\n            mode: 'single',\n            showClearAll: true,\n            dateFormat: 'MMM d, yyyy',\n            locale: 'en-US',\n            showSelectWeekdays: true,\n            showSelectWeekends: true,\n            showSelectAllDays: true,\n            disabledDates: [],\n            disablePast: false,\n            disableFuture: false,\n            minDate: null,\n            maxDate: null,\n            ...options\n        };\n        this.selectedDisplay = this.options.selectedDatesDisplaySelector\n            ? document.querySelector(this.options.selectedDatesDisplaySelector)\n            : null;\n        this.currentDate = new Date();\n        this.ranges = [];\n        this.selectedDates = [];\n        this.currentRangeStart = null;\n        this.todayString = new Date().toISOString().split('T')[0];\n        this.datepickerElement = this.buildUI();\n        document.body.appendChild(this.datepickerElement);\n        this.show = this.show.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.attachEventListeners();\n        this.renderCalendar();\n    }\n    buildUI() {\n        const datepickerEl = document.createElement('div');\n        datepickerEl.className = 'mrdp-container';\n        const showMultiControls = this.options.mode === 'multiple' || this.options.mode === 'multi-range';\n        let selectionControlsHTML = '';\n        if (showMultiControls) {\n            let buttons = [];\n            if (this.options.showSelectWeekdays) buttons.push('<button id=\"mrdp-select-weekdays\">Select Weekdays</button>');\n            if (this.options.showSelectWeekends) buttons.push('<button id=\"mrdp-select-weekends\">Select Weekends</button>');\n            if (this.options.showSelectAllDays) buttons.push('<button id=\"mrdp-select-all-days\">Select All Days</button>');\n            const gridCols = `repeat(${buttons.length}, 1fr)`;\n            if (buttons.length > 0) {\n                selectionControlsHTML = `\n                <div class=\"mrdp-controls\" style=\"grid-template-columns: ${gridCols};\">\n                    ${buttons.join('')}\n                </div>`;\n            }\n        }\n        let clearButtonHTML = '';\n        if (this.options.showClearAll) {\n            clearButtonHTML = `\n            <div class=\"mrdp-controls\">\n                 <button id=\"mrdp-clear-all\" class=\"mrdp-btn-clear\">Clear All Selections</button>\n            </div>`;\n        }\n\n\n        const weekdayFormatter = new Intl.DateTimeFormat(this.options.locale, { weekday: 'short' });\n        const weekdayHeaders = [];\n        const tempDate = new Date(2020, 5, 7);\n        for (let i = 0; i < 7; i++) {\n            const dayName = weekdayFormatter.format(new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate() + i));\n            weekdayHeaders.push(`<div class=\"mrdp-day-header\">${dayName}</div>`);\n        }\n\n        datepickerEl.innerHTML = `\n            <div class=\"mrdp-header\">\n                <button id=\"mrdp-prev-month-btn\" class=\"mrdp-nav-btn\">&lt;</button>\n                <h3 id=\"mrdp-current-month-year\"></h3>\n                <button id=\"mrdp-next-month-btn\" class=\"mrdp-nav-btn\">&gt;</button>\n            </div>\n            <div class=\"mrdp-grid\">\n                ${weekdayHeaders.join('')}\n            </div>\n            ${selectionControlsHTML}\n            ${clearButtonHTML}\n        `;\n        this.grid = datepickerEl.querySelector('.mrdp-grid');\n        this.monthYearEl = datepickerEl.querySelector('#mrdp-current-month-year');\n        datepickerEl.querySelector('#mrdp-prev-month-btn').addEventListener('click', () => this.handlePrevMonth());\n        datepickerEl.querySelector('#mrdp-next-month-btn').addEventListener('click', () => this.handleNextMonth());\n        if (showMultiControls) {\n            if (this.options.showSelectWeekdays) datepickerEl.querySelector('#mrdp-select-weekdays').addEventListener('click', () => this.handleSelectWeekdays());\n            if (this.options.showSelectWeekends) datepickerEl.querySelector('#mrdp-select-weekends').addEventListener('click', () => this.handleSelectWeekends());\n            if (this.options.showSelectAllDays) datepickerEl.querySelector('#mrdp-select-all-days').addEventListener('click', () => this.handleSelectAllDays());\n        }\n        if (this.options.showClearAll) datepickerEl.querySelector('#mrdp-clear-all').addEventListener('click', () => this.handleClearAll());\n        return datepickerEl;\n    }\n\n    attachEventListeners() {\n        this.inputElement.addEventListener('click', this.show);\n        document.addEventListener('mousedown', this.handleOutsideClick);\n    }\n\n    show() {\n        if (this.datepickerElement.classList.contains('mrdp-visible')) return;\n\n        const rect = this.inputElement.getBoundingClientRect();\n\n        this.datepickerElement.style.top = `${rect.bottom + window.scrollY + 5}px`;\n        this.datepickerElement.style.left = `${rect.left + window.scrollX}px`;\n\n        this.datepickerElement.classList.add('mrdp-visible');\n    }\n\n    hide() {\n        this.datepickerElement.classList.remove('mrdp-visible');\n    }\n\n    handleOutsideClick(e) {\n        if (e.target === this.inputElement) return;\n        if (this.datepickerElement.contains(e.target)) return;\n        this.hide();\n    }\n\n    renderCalendar() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n\n        const dayHeaders = this.grid.querySelectorAll('.mrdp-day-header');\n        this.grid.innerHTML = '';\n        dayHeaders.forEach(header => this.grid.appendChild(header));\n\n        this.monthYearEl.textContent = new Date(year, month).toLocaleString(this.options.locale, {\n            month: 'long',\n            year: 'numeric'\n        });\n\n        const firstDayOfMonth = new Date(year, month, 1).getDay();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        for (let i = 0; i < firstDayOfMonth; i++) {\n            const emptyCell = document.createElement('div');\n            emptyCell.classList.add('mrdp-day-cell', 'empty');\n            this.grid.appendChild(emptyCell);\n        }\n\n        for (let day = 1; day <= daysInMonth; day++) {\n\n            const date = new Date(year, month, day);\n            const dateString = this._getDateString(year, month, day);\n            const dayCell = document.createElement('div');\n            dayCell.classList.add('mrdp-day-cell');\n            dayCell.textContent = day;\n            dayCell.dataset.date = dateString;\n\n            const disabled = this.isDateDisabled(date);\n            if (disabled) dayCell.classList.add('disabled');\n\n            if (dateString === this.todayString) dayCell.classList.add('today');\n\n            this._applySelectionStyles(dayCell, dateString);\n\n            if (!disabled) {\n                dayCell.addEventListener('click', () => this.handleDateClick(dateString));\n            }\n\n            this.grid.appendChild(dayCell);\n        }\n    }\n\n    _applySelectionStyles(dayCell, dateString) {\n        if (this.options.mode === 'single' || this.options.mode === 'multiple') {\n            if (this.selectedDates.includes(dateString)) {\n                dayCell.classList.add('selected-start', 'selected-end');\n            }\n            return;\n        }\n        let isStart = false, isEnd = false, inRange = false;\n        for (const range of this.ranges) {\n            if (dateString === range.start) isStart = true;\n            if (dateString === range.end) isEnd = true;\n            if (dateString > range.start && dateString < range.end) inRange = true;\n            if (dateString === range.start && dateString === range.end) isStart = isEnd = true;\n        }\n        if (isStart && isEnd) dayCell.classList.add('selected-start', 'selected-end');\n        else if (isStart) dayCell.classList.add('selected-start');\n        else if (isEnd) dayCell.classList.add('selected-end');\n        else if (inRange) dayCell.classList.add('in-range');\n        if (dateString === this.currentRangeStart) {\n            dayCell.classList.add('pending-start');\n        }\n    }\n\n    handleDateClick(dateString) {\n        switch (this.options.mode) {\n            case 'single':\n                this._handleSingleClick(dateString);\n                break;\n            case 'multiple':\n                this._handleMultipleClick(dateString);\n                break;\n            case 'range':\n                this._handleRangeClick(dateString);\n                break;\n            case 'multi-range':\n                this._handleFlexiClick(dateString);\n                break;\n        }\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    _handleSingleClick(dateString) {\n        this.selectedDates = [dateString];\n        this.hide();\n    }\n\n    _handleMultipleClick(dateString) {\n        const index = this.selectedDates.indexOf(dateString);\n        if (index > -1) {\n            this.selectedDates.splice(index, 1);\n        } else {\n            this.selectedDates.push(dateString);\n        }\n    }\n\n    _handleRangeClick(dateString) {\n        if (this.currentRangeStart === null) {\n            this.currentRangeStart = dateString;\n            this.ranges = [];\n        } else {\n            let startDate = this.currentRangeStart, endDate = dateString;\n            this.currentRangeStart = null;\n            if (endDate < startDate) [startDate, endDate] = [endDate, startDate];\n\n            this.ranges = [{ start: startDate, end: endDate }];\n        }\n    }\n\n    _handleFlexiClick(dateString) {\n        const clickedRangeIndex = this.ranges.findIndex(range =>\n            dateString >= range.start && dateString <= range.end\n        );\n\n        if (clickedRangeIndex > -1) {\n            const clickedRange = this.ranges[clickedRangeIndex];\n            this.ranges.splice(clickedRangeIndex, 1);\n\n            const beforeDate = this.addDay(dateString, -1);\n            const afterDate = this.addDay(dateString, 1);\n\n            if (clickedRange.start === dateString) {\n                if (afterDate <= clickedRange.end) this.ranges.push({ start: afterDate, end: clickedRange.end });\n            } else if (clickedRange.end === dateString) {\n                if (beforeDate >= clickedRange.start) this.ranges.push({ start: clickedRange.start, end: beforeDate });\n            } else {\n                if (beforeDate >= clickedRange.start) this.ranges.push({ start: clickedRange.start, end: beforeDate });\n                if (afterDate <= clickedRange.end) this.ranges.push({ start: afterDate, end: clickedRange.end });\n            }\n            this.currentRangeStart = null;\n        } else if (this.currentRangeStart === null) {\n            this.currentRangeStart = dateString;\n        } else {\n            let startDate = this.currentRangeStart, endDate = dateString;\n            this.currentRangeStart = null;\n            if (endDate < startDate) [startDate, endDate] = [endDate, startDate];\n\n            this.ranges.push({ start: startDate, end: endDate });\n            this.simplifyRanges();\n        }\n    }\n\n    handlePrevMonth() {\n        let newMonth = this.currentDate.getMonth() - 1;\n        let newYear = this.currentDate.getFullYear();\n        if (newMonth < 0) {\n            newMonth = 11;\n            newYear -= 1;\n        }\n        this.currentDate = new Date(newYear, newMonth, 1);\n        this.renderCalendar();\n    }\n\n    handleNextMonth() {\n        let newMonth = this.currentDate.getMonth() + 1;\n        let newYear = this.currentDate.getFullYear();\n        if (newMonth > 11) {\n            newMonth = 0;\n            newYear += 1;\n        }\n        this.currentDate = new Date(newYear, newMonth, 1);\n        this.renderCalendar();\n    }\n\n    handleSelectAllDays() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        if (this.options.mode === 'multiple') {\n            for (let day = 1; day <= daysInMonth; day++) {\n                const dateString = this._getDateString(year, month, day);\n                if (!this.selectedDates.includes(dateString)) {\n                    this.selectedDates.push(dateString);\n                }\n            }\n        } else if (this.options.mode === 'multi-range') {\n            const firstDayString = this._getDateString(year, month, 1);\n            const lastDayString = this._getDateString(year, month, daysInMonth);\n            this.addRanges([{ start: firstDayString, end: lastDayString }]);\n        }\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleSelectWeekdays() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        const newRanges = [];\n        const newDates = [];\n\n        for (let day = 1; day <= daysInMonth; day++) {\n            const date = new Date(year, month, day);\n            const dayOfWeek = date.getDay();\n            const dateString = this._getDateString(year, month, day);\n\n            const isWeekday = dayOfWeek >= 1 && dayOfWeek <= 5;\n\n            if (isWeekday) {\n                if (this.options.mode === 'multiple' && !this.selectedDates.includes(dateString)) {\n                    newDates.push(dateString);\n                } else if (this.options.mode === 'multi-range' && !this.isDateInRange(dateString)) {\n                    newRanges.push({ start: dateString, end: dateString });\n                }\n            }\n        }\n\n        if (this.options.mode === 'multiple') this.selectedDates.push(...newDates);\n        if (this.options.mode === 'multi-range') this.addRanges(newRanges);\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleSelectWeekends() {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n        const newRanges = [];\n        const newDates = [];\n\n        for (let day = 1; day <= daysInMonth; day++) {\n            const date = new Date(year, month, day);\n            const dayOfWeek = date.getDay();\n            const dateString = this._getDateString(year, month, day);\n\n            const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n\n            if (isWeekend) {\n                if (this.options.mode === 'multiple' && !this.selectedDates.includes(dateString)) {\n                    newDates.push(dateString);\n                } else if (this.options.mode === 'multi-range' && !this.isDateInRange(dateString)) {\n                    newRanges.push({ start: dateString, end: dateString });\n                }\n            }\n        }\n\n        if (this.options.mode === 'multiple') this.selectedDates.push(...newDates);\n        if (this.options.mode === 'multi-range') this.addRanges(newRanges);\n\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    handleClearAll() {\n        this.ranges = [];\n        this.selectedDates = [];\n        this.currentRangeStart = null;\n        this.renderCalendar();\n        this.updateSelectedDisplay();\n    }\n\n    updateSelectedDisplay() {\n        this._updateInputValue();\n        if (this.selectedDisplay) {\n            this._updateExternalDisplay();\n        }\n        if (this.options.onSelectionChange && typeof this.options.onSelectionChange === 'function') {\n            this.options.onSelectionChange({\n                ranges: this.ranges,\n                dates: this.selectedDates\n            });\n        }\n    }\n    \n    _updateInputValue() {\n        if (this.options.mode === 'single') {\n            if (this.selectedDates.length === 0) {\n                this.inputElement.value = '';\n            } else {\n                this.inputElement.value = this.formatDate(this.selectedDates[0]);\n            }\n        } else if (this.options.mode === 'multiple') {\n            if (this.selectedDates.length === 0) {\n                this.inputElement.value = '';\n            } else if (this.selectedDates.length === 1) {\n                this.inputElement.value = this.formatDate(this.selectedDates[0]);\n            } else {\n                this.inputElement.value = `${this.selectedDates.length} Dates Selected`;\n            }\n        } else if (this.options.mode === 'range') {\n            if (this.ranges.length === 0) {\n                this.inputElement.value = '';\n            } else {\n                const range = this.ranges[0];\n                const start = this.formatDate(range.start);\n                const end = this.formatDate(range.end);\n                this.inputElement.value = (start === end) ? start : `${start} - ${end}`;\n            }\n        } else if (this.options.mode === 'multi-range') {\n            if (this.ranges.length === 0) {\n                this.inputElement.value = '';\n            } else if (this.ranges.length === 1) {\n                const range = this.ranges[0];\n                const start = this.formatDate(range.start);\n                const end = this.formatDate(range.end);\n                this.inputElement.value = (start === end) ? start : `${start} - ${end}`;\n            } else {\n                this.inputElement.value = `${this.ranges.length} Ranges Selected`;\n            }\n        }\n    }\n\n    _updateExternalDisplay() {\n        let html = '';\n        this.selectedDates.sort();\n        this.ranges.sort((a, b) => a.start.localeCompare(b.start));\n\n        if (this.selectedDates.length === 0 && this.ranges.length === 0 && !this.currentRangeStart) {\n            this.selectedDisplay.innerHTML = 'None';\n            return;\n        }\n        this.selectedDates.forEach(dateStr => {\n            html += `<div>${this.formatDate(dateStr, true)}</div>`;\n        });\n\n        this.ranges.forEach(range => {\n            const start = this.formatDate(range.start, true);\n            const end = this.formatDate(range.end, true);\n            if (start === end) html += `<div>${start}</div>`;\n            else html += `<div>${start} &mdash; ${end}</div>`;\n        });\n\n        if (this.currentRangeStart) {\n            const start = this.formatDate(this.currentRangeStart, true);\n            html += `<div><em>Selecting range from: ${start}...</em></div>`;\n        }\n\n        this.selectedDisplay.innerHTML = html;\n    }\n\n    formatDate(dateString, showYear = false) {\n        const date = new Date(dateString + 'T00:00:00');\n        const fmt = this.options.dateFormat || 'MMM d, yyyy';\n        return this.formatCustomDate(date, fmt);\n    }\n\n    formatCustomDate(date, format) {\n        const day = date.getDate();\n        const month = date.getMonth() + 1;\n        const year = date.getFullYear();\n\n        const pad = (n) => n.toString().padStart(2, '0');\n\n        const locale = this.options.locale || 'en-US';\n        const monthNameShort = new Intl.DateTimeFormat(locale, { month: 'short' }).format(date);\n        const monthNameLong = new Intl.DateTimeFormat(locale, { month: 'long' }).format(date);\n\n        return format\n            .replace(/dd/g, pad(day))\n            .replace(/d(?![a-z])/g, day)\n            .replace(/MMMM/g, monthNameLong)\n            .replace(/MMM/g, monthNameShort)\n            .replace(/MM/g, pad(month))\n            .replace(/M(?![a-z])/g, month)\n            .replace(/yyyy/g, year)\n            .replace(/yy/g, String(year).slice(-2));\n    }\n\n    addDay(dateString, days) {\n        const date = new Date(dateString + 'T00:00:00');\n        date.setDate(date.getDate() + days);\n        return this._getDateString(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n\n    _getDateString(year, month, day) {\n        return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n    }\n\n\n    isDateInRange(dateString) {\n        return this.ranges.some(range => dateString >= range.start && dateString <= range.end);\n    }\n\n    isDateDisabled(date) {\n        const d = date.toISOString().split('T')[0];\n        if (this.options.disabledDates.some(dis => dis === d)) {\n            return true;\n        }\n        for (const item of this.options.disabledDates) {\n            if (item && item.from && item.to) {\n                if (d >= item.from && d <= item.to) return true;\n            }\n        }\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        if (this.options.disablePast && date < today) return true;\n        if (this.options.disableFuture && date > today) return true;\n        if (this.options.minDate && d < this.options.minDate) return true;\n        if (this.options.maxDate && d > this.options.maxDate) return true;\n\n        return false;\n    }\n\n\n    simplifyRanges() {\n        if (this.ranges.length < 2) return;\n        this.ranges.sort((a, b) => a.start.localeCompare(b.start));\n\n        const simplified = [this.ranges[0]];\n        for (let i = 1; i < this.ranges.length; i++) {\n            const current = this.ranges[i];\n            const last = simplified[simplified.length - 1];\n            const adjacentDate = this.addDay(last.end, 1);\n\n            if (current.start <= last.end || current.start === adjacentDate) {\n                last.end = current.end > last.end ? current.end : last.end;\n            } else {\n                simplified.push(current);\n            }\n        }\n        this.ranges = simplified;\n    }\n\n\n    addRanges(newRanges) {\n        for (const newRange of newRanges) {\n            const isContained = this.ranges.some(\n                r => newRange.start >= r.start && newRange.end <= r.end\n            );\n            if (!isContained) {\n                this.ranges.push(newRange);\n            }\n        }\n        this.simplifyRanges();\n    }\n}"],"names":["FlexiDatepicker","_createClass","inputSelector","options","arguments","length","undefined","_classCallCheck","this","inputElement","document","querySelector","_objectSpread","mode","showClearAll","dateFormat","locale","showSelectWeekdays","showSelectWeekends","showSelectAllDays","disabledDates","disablePast","disableFuture","minDate","maxDate","selectedDisplay","selectedDatesDisplaySelector","currentDate","Date","ranges","selectedDates","currentRangeStart","todayString","toISOString","split","datepickerElement","buildUI","body","appendChild","show","bind","handleOutsideClick","attachEventListeners","renderCalendar","console","error","key","value","_this","datepickerEl","createElement","className","showMultiControls","selectionControlsHTML","buttons","push","gridCols","concat","join","clearButtonHTML","weekdayFormatter","Intl","DateTimeFormat","weekday","weekdayHeaders","tempDate","i","dayName","format","getFullYear","getMonth","getDate","innerHTML","grid","monthYearEl","addEventListener","handlePrevMonth","handleNextMonth","handleSelectWeekdays","handleSelectWeekends","handleSelectAllDays","handleClearAll","classList","contains","rect","getBoundingClientRect","style","top","bottom","window","scrollY","left","scrollX","add","remove","e","target","hide","_this2","year","month","dayHeaders","querySelectorAll","forEach","header","textContent","toLocaleString","firstDayOfMonth","getDay","daysInMonth","emptyCell","_loop","date","day","dateString","_getDateString","dayCell","dataset","disabled","isDateDisabled","_applySelectionStyles","handleDateClick","_step","isStart","isEnd","inRange","_iterator","_createForOfIteratorHelper","s","n","done","range","start","end","err","f","includes","_handleSingleClick","_handleMultipleClick","_handleRangeClick","_handleFlexiClick","updateSelectedDisplay","index","indexOf","splice","startDate","endDate","_ref","clickedRangeIndex","findIndex","clickedRange","beforeDate","addDay","afterDate","_ref2","simplifyRanges","newMonth","newYear","firstDayString","lastDayString","addRanges","_this$selectedDates","newRanges","newDates","dayOfWeek","isDateInRange","apply","_this$selectedDates2","_updateInputValue","_updateExternalDisplay","onSelectionChange","dates","formatDate","_this3","html","sort","a","b","localeCompare","dateStr","fmt","formatCustomDate","pad","toString","padStart","monthNameShort","monthNameLong","replace","String","slice","days","setDate","some","d","dis","_step2","_iterator2","item","from","to","today","setHours","simplified","current","last","adjacentDate","_step3","_this4","_iterator3","_loop2","newRange","r"],"mappings":"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"}