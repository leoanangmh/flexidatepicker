!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).FlexiDatepicker = t() }(this, function () {
   "use strict"; function e(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = Array(t); n < t; n++)r[n] = e[n]; return r } function t(e, t, n) { return t && function (e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, i(r.key), r) } }(e.prototype, t), Object.defineProperty(e, "prototype", { writable: !1 }), e } function n(t, n) {
      var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (!r) {
         if (Array.isArray(t) || (r = function (t, n) { if (t) { if ("string" == typeof t) return e(t, n); var r = {}.toString.call(t).slice(8, -1); return "Object" === r && t.constructor && (r = t.constructor.name), "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? e(t, n) : void 0 } }
/**
   * FlexiDatepicker
   * A lightweight, dependency-free JavaScript date picker supporting single, multiple, range, and multi-range selection modes.
   *
   * @version 1.1.0
   * @license MIT
   * @author
   *   Leo Anang Miftahul Huda
   *
   **/(t)) || n) { r && (t = r); var a = 0, i = function () { }; return { s: i, n: function () { return a >= t.length ? { done: !0 } : { done: !1, value: t[a++] } }, e: function (e) { throw e }, f: i } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
      } var s, l = !0, d = !1; return { s: function () { r = r.call(t) }, n: function () { var e = r.next(); return l = e.done, e }, e: function (e) { d = !0, s = e }, f: function () { try { l || null == r.return || r.return() } finally { if (d) throw s } } }
   } function r(e, t, n) { return (t = i(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function a(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function i(e) { var t = function (e, t) { if ("object" != typeof e || !e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, t); if ("object" != typeof r) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e, "string"); return "symbol" == typeof t ? t : t + "" } var s = function () { return t(function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), this.inputElement = document.querySelector(t), this.inputElement ? (this.options = function (e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? a(Object(n), !0).forEach(function (t) { r(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : a(Object(n)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e }({ mode: "multi-range", showClearAll: !0, dateFormat: "MMM d, yyyy", locale: "en-US", selectedDatesDisplaySelector: "", showSelectWeekdays: !0, showSelectWeekends: !0, showSelectAllDays: !0, disabledDates: [], disablePast: !1, disableFuture: !1, minDate: null, maxDate: null, dualCalendar: !1 }, n), this.selectedDisplay = this.options.selectedDatesDisplaySelector ? document.querySelector(this.options.selectedDatesDisplaySelector) : null, this.currentDate = new Date, this.currentDate2 = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1), this.ranges = [], this.selectedDates = [], this.currentRangeStart = null, this.todayString = (new Date).toISOString().split("T")[0], this.datepickerElement = this.buildUI(), document.body.appendChild(this.datepickerElement), this.show = this.show.bind(this), this.handleOutsideClick = this.handleOutsideClick.bind(this), this.attachEventListeners(), this.renderCalendar()) : console.error("FlexiDatepicker: Input element not found.") }, [{ key: "buildUI", value: function () { var e = this, t = document.createElement("div"); t.className = "mrdp-container", this.options.dualCalendar && t.classList.add("mrdp-dual-calendar"); var n = "multiple" === this.options.mode || "multi-range" === this.options.mode, r = ""; if (n) { var a = []; this.options.showSelectWeekdays && a.push('<button id="mrdp-select-weekdays">Select Weekdays</button>'), this.options.showSelectWeekends && a.push('<button id="mrdp-select-weekends">Select Weekends</button>'), this.options.showSelectAllDays && a.push('<button id="mrdp-select-all-days">Select All Days</button>'); var i = "repeat(".concat(a.length, ", 1fr)"); a.length > 0 && (r = '\n                  <div class="mrdp-controls" style="grid-template-columns: '.concat(i, ';">\n                      ').concat(a.join(""), "\n                  </div>")) } var s = ""; this.options.showClearAll && (s = '\n              <div class="mrdp-controls">\n                   <button id="mrdp-clear-all" class="mrdp-btn-clear">Clear All Selections</button>\n              </div>'); for (var l = new Intl.DateTimeFormat(this.options.locale, { weekday: "short" }), d = [], o = new Date(2020, 5, 7), c = 0; c < 7; c++) { var h = l.format(new Date(o.getFullYear(), o.getMonth(), o.getDate() + c)); d.push('<div class="mrdp-day-header">'.concat(h, "</div>")) } return this.options.dualCalendar ? t.innerHTML = '\n          <div class="mrdp-dual-wrapper">\n            <div class="mrdp-calendar-panel">\n              <div class="mrdp-header">\n                <button id="mrdp-prev-month-btn" class="mrdp-nav-btn">&lt;</button>\n                <div class="mrdp-month-year-display">\n                  <button id="mrdp-month-btn" class="mrdp-month-year-btn"></button>\n                  <button id="mrdp-year-btn" class="mrdp-month-year-btn"></button>\n                </div>\n                <button class="mrdp-nav-btn" style="visibility: hidden;">&gt;</button>\n              </div>\n              <div id="mrdp-month-picker" class="mrdp-picker-overlay" style="display: none;">\n                <div class="mrdp-picker-header">Select Month</div>\n                <div id="mrdp-month-grid" class="mrdp-month-grid"></div>\n              </div>\n              <div id="mrdp-year-picker" class="mrdp-picker-overlay" style="display: none;">\n                <div class="mrdp-picker-header">\n                  <button id="mrdp-year-prev" class="mrdp-year-nav">&lt;</button>\n                  <span id="mrdp-year-range"></span>\n                  <button id="mrdp-year-next" class="mrdp-year-nav">&gt;</button>\n                </div>\n                <div id="mrdp-year-grid" class="mrdp-year-grid"></div>\n              </div>\n              <div class="mrdp-grid">\n                '.concat(d.join(""), '\n              </div>\n            </div>\n            <div class="mrdp-calendar-panel">\n              <div class="mrdp-header">\n                <button class="mrdp-nav-btn" style="visibility: hidden;">&lt;</button>\n                <div class="mrdp-month-year-display">\n                  <button id="mrdp-month-btn-2" class="mrdp-month-year-btn"></button>\n                  <button id="mrdp-year-btn-2" class="mrdp-month-year-btn"></button>\n                </div>\n                <button id="mrdp-next-month-btn" class="mrdp-nav-btn">&gt;</button>\n              </div>\n              <div id="mrdp-month-picker-2" class="mrdp-picker-overlay" style="display: none;">\n                <div class="mrdp-picker-header">Select Month</div>\n                <div id="mrdp-month-grid-2" class="mrdp-month-grid"></div>\n              </div>\n              <div id="mrdp-year-picker-2" class="mrdp-picker-overlay" style="display: none;">\n                <div class="mrdp-picker-header">\n                  <button id="mrdp-year-prev-2" class="mrdp-year-nav">&lt;</button>\n                  <span id="mrdp-year-range-2"></span>\n                  <button id="mrdp-year-next-2" class="mrdp-year-nav">&gt;</button>\n                </div>\n                <div id="mrdp-year-grid-2" class="mrdp-year-grid"></div>\n              </div>\n              <div class="mrdp-grid-2">\n                ').concat(d.join(""), "\n              </div>\n            </div>\n          </div>\n          ").concat(r, "\n          ").concat(s, "\n        ") : t.innerHTML = '\n          <div class="mrdp-header">\n            <button id="mrdp-prev-month-btn" class="mrdp-nav-btn">&lt;</button>\n            <div class="mrdp-month-year-display">\n              <button id="mrdp-month-btn" class="mrdp-month-year-btn"></button>\n              <button id="mrdp-year-btn" class="mrdp-month-year-btn"></button>\n            </div>\n            <button id="mrdp-next-month-btn" class="mrdp-nav-btn">&gt;</button>\n          </div>\n          <div id="mrdp-month-picker" class="mrdp-picker-overlay" style="display: none;">\n            <div class="mrdp-picker-header">Select Month</div>\n            <div id="mrdp-month-grid" class="mrdp-month-grid"></div>\n          </div>\n          <div id="mrdp-year-picker" class="mrdp-picker-overlay" style="display: none;">\n            <div class="mrdp-picker-header">\n              <button id="mrdp-year-prev" class="mrdp-year-nav">&lt;</button>\n              <span id="mrdp-year-range"></span>\n              <button id="mrdp-year-next" class="mrdp-year-nav">&gt;</button>\n            </div>\n            <div id="mrdp-year-grid" class="mrdp-year-grid"></div>\n          </div>\n          <div class="mrdp-grid">\n            '.concat(d.join(""), "\n          </div>\n          ").concat(r, "\n          ").concat(s, "\n        "), this.grid = t.querySelector(".mrdp-grid"), this.monthBtn = t.querySelector("#mrdp-month-btn"), this.yearBtn = t.querySelector("#mrdp-year-btn"), this.monthPicker = t.querySelector("#mrdp-month-picker"), this.yearPicker = t.querySelector("#mrdp-year-picker"), this.monthGrid = t.querySelector("#mrdp-month-grid"), this.yearGrid = t.querySelector("#mrdp-year-grid"), this.yearRange = t.querySelector("#mrdp-year-range"), this.yearStartOffset = 0, this.options.dualCalendar && (this.grid2 = t.querySelector(".mrdp-grid-2"), this.monthBtn2 = t.querySelector("#mrdp-month-btn-2"), this.yearBtn2 = t.querySelector("#mrdp-year-btn-2"), this.monthPicker2 = t.querySelector("#mrdp-month-picker-2"), this.yearPicker2 = t.querySelector("#mrdp-year-picker-2"), this.monthGrid2 = t.querySelector("#mrdp-month-grid-2"), this.yearGrid2 = t.querySelector("#mrdp-year-grid-2"), this.yearRange2 = t.querySelector("#mrdp-year-range-2"), this.yearStartOffset2 = 0), this.setupMonthYearPickers(), t.querySelector("#mrdp-prev-month-btn").addEventListener("click", function () { return e.handlePrevMonth() }), t.querySelector("#mrdp-next-month-btn").addEventListener("click", function () { return e.handleNextMonth() }), n && (this.options.showSelectWeekdays && t.querySelector("#mrdp-select-weekdays").addEventListener("click", function () { return e.handleSelectWeekdays() }), this.options.showSelectWeekends && t.querySelector("#mrdp-select-weekends").addEventListener("click", function () { return e.handleSelectWeekends() }), this.options.showSelectAllDays && t.querySelector("#mrdp-select-all-days").addEventListener("click", function () { return e.handleSelectAllDays() })), this.options.showClearAll && t.querySelector("#mrdp-clear-all").addEventListener("click", function () { return e.handleClearAll() }), this.monthBtn.addEventListener("click", function () { return e.showMonthPicker() }), this.yearBtn.addEventListener("click", function () { return e.showYearPicker() }), t.querySelector("#mrdp-year-prev").addEventListener("click", function () { return e.changeYearRange(-12) }), t.querySelector("#mrdp-year-next").addEventListener("click", function () { return e.changeYearRange(12) }), this.options.dualCalendar && (this.monthBtn2.addEventListener("click", function () { return e.showMonthPicker(2) }), this.yearBtn2.addEventListener("click", function () { return e.showYearPicker(2) }), t.querySelector("#mrdp-year-prev-2").addEventListener("click", function () { return e.changeYearRange(-12, 2) }), t.querySelector("#mrdp-year-next-2").addEventListener("click", function () { return e.changeYearRange(12, 2) })), t } }, { key: "setupMonthYearPickers", value: function () { var e = this, t = new Intl.DateTimeFormat(this.options.locale, { month: "short" }); this.monthGrid.innerHTML = ""; for (var n = function (n) { var r = t.format(new Date(2020, n, 1)), a = document.createElement("button"); a.className = "mrdp-picker-item", a.textContent = r, a.dataset.month = n, a.addEventListener("click", function () { return e.selectMonth(n) }), e.monthGrid.appendChild(a) }, r = 0; r < 12; r++)n(r); if (this.options.dualCalendar) { this.monthGrid2.innerHTML = ""; for (var a = function (n) { var r = t.format(new Date(2020, n, 1)), a = document.createElement("button"); a.className = "mrdp-picker-item", a.textContent = r, a.dataset.month = n, a.addEventListener("click", function () { return e.selectMonth(n, 2) }), e.monthGrid2.appendChild(a) }, i = 0; i < 12; i++)a(i) } this.renderYearGrid() } }, { key: "renderYearGrid", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, n = (new Date).getFullYear(), r = n + (1 === t ? this.yearStartOffset : this.yearStartOffset2), a = 1 === t ? this.yearRange : this.yearRange2, i = 1 === t ? this.yearGrid : this.yearGrid2; a.textContent = "".concat(r, " - ").concat(r + 11), i.innerHTML = ""; for (var s = function () { var a = r + l, s = document.createElement("button"); s.className = "mrdp-picker-item", s.textContent = a, s.dataset.year = a, a === n && s.classList.add("current-year"), s.addEventListener("click", function () { return e.selectYear(a, t) }), i.appendChild(s) }, l = 0; l < 12; l++)s() } }, { key: "changeYearRange", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; 1 === t ? this.yearStartOffset += e : this.yearStartOffset2 += e, this.renderYearGrid(t) } }, { key: "showMonthPicker", value: function () { if (1 === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1)) { this.monthPicker.style.display = "block", this.yearPicker.style.display = "none"; var e = this.currentDate.getMonth(); this.monthGrid.querySelectorAll(".mrdp-picker-item").forEach(function (t, n) { t.classList.toggle("active", n === e) }) } else { this.monthPicker2.style.display = "block", this.yearPicker2.style.display = "none"; var t = this.currentDate2.getMonth(); this.monthGrid2.querySelectorAll(".mrdp-picker-item").forEach(function (e, n) { e.classList.toggle("active", n === t) }) } } }, { key: "showYearPicker", value: function () { if (1 === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1)) { this.yearPicker.style.display = "block", this.monthPicker.style.display = "none"; var e = this.currentDate.getFullYear(), t = (new Date).getFullYear(); this.yearStartOffset = 12 * Math.floor((e - t) / 12), this.renderYearGrid(1), this.yearGrid.querySelectorAll(".mrdp-picker-item").forEach(function (t) { t.classList.toggle("active", Number.parseInt(t.dataset.year) === e) }) } else { this.yearPicker2.style.display = "block", this.monthPicker2.style.display = "none"; var n = this.currentDate2.getFullYear(), r = (new Date).getFullYear(); this.yearStartOffset2 = 12 * Math.floor((n - r) / 12), this.renderYearGrid(2), this.yearGrid2.querySelectorAll(".mrdp-picker-item").forEach(function (e) { e.classList.toggle("active", Number.parseInt(e.dataset.year) === n) }) } } }, { key: "selectMonth", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; 1 === t ? (this.currentDate.setMonth(e), this.monthPicker.style.display = "none") : (this.currentDate2.setMonth(e), this.monthPicker2.style.display = "none"), this.options.dualCalendar && 1 === t && (this.currentDate2 = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1)), this.renderCalendar() } }, { key: "selectYear", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; 1 === t ? (this.currentDate.setFullYear(e), this.yearPicker.style.display = "none") : (this.currentDate2.setFullYear(e), this.yearPicker2.style.display = "none"), this.options.dualCalendar && 1 === t && (this.currentDate2 = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1)), this.renderCalendar() } }, { key: "show", value: function () { if (!this.datepickerElement.classList.contains("mrdp-visible")) { var e = this.inputElement.getBoundingClientRect(); this.datepickerElement.style.top = "".concat(e.bottom + window.scrollY + 5, "px"), this.datepickerElement.style.left = "".concat(e.left + window.scrollX, "px"), this.datepickerElement.classList.add("mrdp-visible") } } }, { key: "hide", value: function () { this.datepickerElement.classList.remove("mrdp-visible") } }, { key: "handleOutsideClick", value: function (e) { e.target !== this.inputElement && (this.datepickerElement.contains(e.target) || this.hide()) } }, { key: "renderCalendar", value: function () { this.renderSingleCalendar(this.currentDate, this.grid, this.monthBtn, this.yearBtn), this.options.dualCalendar && this.renderSingleCalendar(this.currentDate2, this.grid2, this.monthBtn2, this.yearBtn2) } }, { key: "renderSingleCalendar", value: function (e, t, n, r) { var a = this, i = e.getFullYear(), s = e.getMonth(); Array.from(t.querySelectorAll(".mrdp-day-header")), Array.from(t.querySelectorAll(".mrdp-day-cell")).forEach(function (e) { return e.remove() }); var l = new Intl.DateTimeFormat(this.options.locale, { month: "long" }); n.textContent = l.format(e), r.textContent = i; for (var d = new Date(i, s, 1).getDay(), o = new Date(i, s + 1, 0).getDate(), c = 0; c < d; c++) { var h = document.createElement("div"); h.classList.add("mrdp-day-cell", "empty"), t.appendChild(h) } for (var u = function () { var e = new Date(i, s, p), n = a._getDateString(i, s, p), r = document.createElement("div"); r.classList.add("mrdp-day-cell"), r.textContent = p, r.dataset.date = n; var l = a.isDateDisabled(e); l && r.classList.add("disabled"), n === a.todayString && r.classList.add("today"), a._applySelectionStyles(r, n), l || r.addEventListener("click", function () { return a.handleDateClick(n) }), t.appendChild(r) }, p = 1; p <= o; p++)u() } }, { key: "_applySelectionStyles", value: function (e, t) { if ("single" !== this.options.mode && "multiple" !== this.options.mode) { var r, a = !1, i = !1, s = !1, l = n(this.ranges); try { for (l.s(); !(r = l.n()).done;) { var d = r.value; t === d.start && (a = !0), t === d.end && (i = !0), t > d.start && t < d.end && (s = !0), t === d.start && t === d.end && (a = i = !0) } } catch (e) { l.e(e) } finally { l.f() } a && i ? e.classList.add("selected-start", "selected-end") : a ? e.classList.add("selected-start") : i ? e.classList.add("selected-end") : s && e.classList.add("in-range"), t === this.currentRangeStart && e.classList.add("pending-start") } else this.selectedDates.includes(t) && e.classList.add("selected-start", "selected-end") } }, { key: "handleDateClick", value: function (e) { switch (this.options.mode) { case "single": this._handleSingleClick(e); break; case "multiple": this._handleMultipleClick(e); break; case "range": this._handleRangeClick(e); break; case "multi-range": this._handleFlexiClick(e) }this.renderCalendar(), this.updateSelectedDisplay() } }, { key: "_handleSingleClick", value: function (e) { this.selectedDates = [e], this.hide() } }, { key: "_handleMultipleClick", value: function (e) { var t = this.selectedDates.indexOf(e); t > -1 ? this.selectedDates.splice(t, 1) : this.selectedDates.push(e) } }, { key: "_handleRangeClick", value: function (e) { if (null === this.currentRangeStart) this.currentRangeStart = e, this.ranges = []; else { var t = this.currentRangeStart, n = e; if (this.currentRangeStart = null, n < t) { var r = [n, t]; t = r[0], n = r[1] } this.ranges = [{ start: t, end: n }] } } }, { key: "_handleFlexiClick", value: function (e) { var t = this.ranges.findIndex(function (t) { return e >= t.start && e <= t.end }); if (t > -1) { var n = this.ranges[t]; this.ranges.splice(t, 1); var r = this.addDay(e, -1), a = this.addDay(e, 1); n.start === e ? a <= n.end && this.ranges.push({ start: a, end: n.end }) : n.end === e ? r >= n.start && this.ranges.push({ start: n.start, end: r }) : (r >= n.start && this.ranges.push({ start: n.start, end: r }), a <= n.end && this.ranges.push({ start: a, end: n.end })), this.currentRangeStart = null } else if (null === this.currentRangeStart) this.currentRangeStart = e; else { var i = this.currentRangeStart, s = e; if (this.currentRangeStart = null, s < i) { var l = [s, i]; i = l[0], s = l[1] } this.ranges.push({ start: i, end: s }), this.simplifyRanges() } } }, { key: "handlePrevMonth", value: function () { var e = this.currentDate.getMonth() - 1, t = this.currentDate.getFullYear(); e < 0 && (e = 11, t -= 1), this.currentDate = new Date(t, e, 1), this.options.dualCalendar && (this.currentDate2 = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1)), this.renderCalendar() } }, { key: "handleNextMonth", value: function () { var e = this.currentDate.getMonth() + 1, t = this.currentDate.getFullYear(); e > 11 && (e = 0, t += 1), this.currentDate = new Date(t, e, 1), this.options.dualCalendar && (this.currentDate2 = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1)), this.renderCalendar() } }, { key: "handleSelectAllDays", value: function () { var e = this.currentDate.getFullYear(), t = this.currentDate.getMonth(), n = new Date(e, t + 1, 0).getDate(); if ("multiple" === this.options.mode) for (var r = 1; r <= n; r++) { var a = this._getDateString(e, t, r); this.selectedDates.includes(a) || this.selectedDates.push(a) } else if ("multi-range" === this.options.mode) { var i = this._getDateString(e, t, 1), s = this._getDateString(e, t, n); this.addRanges([{ start: i, end: s }]) } if (this.options.dualCalendar) { var l = this.currentDate2.getFullYear(), d = this.currentDate2.getMonth(), o = new Date(l, d + 1, 0).getDate(); if ("multiple" === this.options.mode) for (var c = 1; c <= o; c++) { var h = this._getDateString(l, d, c); this.selectedDates.includes(h) || this.selectedDates.push(h) } else if ("multi-range" === this.options.mode) { var u = this._getDateString(l, d, 1), p = this._getDateString(l, d, o); this.addRanges([{ start: u, end: p }]) } } this.renderCalendar(), this.updateSelectedDisplay() } }, { key: "handleSelectWeekdays", value: function () { for (var e, t = this.currentDate.getFullYear(), n = this.currentDate.getMonth(), r = new Date(t, n + 1, 0).getDate(), a = [], i = [], s = 1; s <= r; s++) { var l = new Date(t, n, s).getDay(), d = this._getDateString(t, n, s); l >= 1 && l <= 5 && ("multiple" !== this.options.mode || this.selectedDates.includes(d) ? "multi-range" !== this.options.mode || this.isDateInRange(d) || a.push({ start: d, end: d }) : i.push(d)) } if (this.options.dualCalendar) for (var o = this.currentDate2.getFullYear(), c = this.currentDate2.getMonth(), h = new Date(o, c + 1, 0).getDate(), u = 1; u <= h; u++) { var p = new Date(o, c, u).getDay(), m = this._getDateString(o, c, u); p >= 1 && p <= 5 && ("multiple" !== this.options.mode || this.selectedDates.includes(m) ? "multi-range" !== this.options.mode || this.isDateInRange(m) || a.push({ start: m, end: m }) : i.push(m)) } "multiple" === this.options.mode && (e = this.selectedDates).push.apply(e, i), "multi-range" === this.options.mode && this.addRanges(a), this.renderCalendar(), this.updateSelectedDisplay() } }, { key: "handleSelectWeekends", value: function () { for (var e, t = this.currentDate.getFullYear(), n = this.currentDate.getMonth(), r = new Date(t, n + 1, 0).getDate(), a = [], i = [], s = 1; s <= r; s++) { var l = new Date(t, n, s).getDay(), d = this._getDateString(t, n, s); (0 === l || 6 === l) && ("multiple" !== this.options.mode || this.selectedDates.includes(d) ? "multi-range" !== this.options.mode || this.isDateInRange(d) || a.push({ start: d, end: d }) : i.push(d)) } if (this.options.dualCalendar) for (var o = this.currentDate2.getFullYear(), c = this.currentDate2.getMonth(), h = new Date(o, c + 1, 0).getDate(), u = 1; u <= h; u++) { var p = new Date(o, c, u).getDay(), m = this._getDateString(o, c, u); (0 === p || 6 === p) && ("multiple" !== this.options.mode || this.selectedDates.includes(m) ? "multi-range" !== this.options.mode || this.isDateInRange(m) || a.push({ start: m, end: m }) : i.push(m)) } "multiple" === this.options.mode && (e = this.selectedDates).push.apply(e, i), "multi-range" === this.options.mode && this.addRanges(a), this.renderCalendar(), this.updateSelectedDisplay() } }, { key: "handleClearAll", value: function () { this.ranges = [], this.selectedDates = [], this.currentRangeStart = null, this.renderCalendar(), this.updateSelectedDisplay() } }, { key: "updateSelectedDisplay", value: function () { this._updateInputValue(), this.selectedDisplay && this._updateExternalDisplay(), this.options.onSelectionChange && "function" == typeof this.options.onSelectionChange && this.options.onSelectionChange({ ranges: this.ranges, dates: this.selectedDates }) } }, { key: "_updateInputValue", value: function () { if ("single" === this.options.mode) 0 === this.selectedDates.length ? this.inputElement.value = "" : this.inputElement.value = this.formatDate(this.selectedDates[0]); else if ("multiple" === this.options.mode) 0 === this.selectedDates.length ? this.inputElement.value = "" : 1 === this.selectedDates.length ? this.inputElement.value = this.formatDate(this.selectedDates[0]) : this.inputElement.value = "".concat(this.selectedDates.length, " Dates Selected"); else if ("range" === this.options.mode) if (0 === this.ranges.length) this.inputElement.value = ""; else { var e = this.ranges[0], t = this.formatDate(e.start), n = this.formatDate(e.end); this.inputElement.value = t === n ? t : "".concat(t, " - ").concat(n) } else if ("multi-range" === this.options.mode) if (0 === this.ranges.length) this.inputElement.value = ""; else if (1 === this.ranges.length) { var r = this.ranges[0], a = this.formatDate(r.start), i = this.formatDate(r.end); this.inputElement.value = a === i ? a : "".concat(a, " - ").concat(i) } else this.inputElement.value = "".concat(this.ranges.length, " Ranges Selected") } }, { key: "_updateExternalDisplay", value: function () { var e = this, t = ""; if (this.selectedDates.sort(), this.ranges.sort(function (e, t) { return e.start.localeCompare(t.start) }), 0 !== this.selectedDates.length || 0 !== this.ranges.length || this.currentRangeStart) { if (this.selectedDates.forEach(function (n) { t += "<div>".concat(e.formatDate(n, !0), "</div>") }), this.ranges.forEach(function (n) { var r = e.formatDate(n.start, !0), a = e.formatDate(n.end, !0); t += r === a ? "<div>".concat(r, "</div>") : "<div>".concat(r, " &mdash; ").concat(a, "</div>") }), this.currentRangeStart) { var n = this.formatDate(this.currentRangeStart, !0); t += "<div><em>Selecting range from: ".concat(n, "...</em></div>") } this.selectedDisplay.innerHTML = t } else this.selectedDisplay.innerHTML = "None" } }, { key: "formatDate", value: function (e) { var t = new Date(e + "T00:00:00"), n = this.options.dateFormat || "MMM d, yyyy"; return this.formatCustomDate(t, n) } }, { key: "formatCustomDate", value: function (e, t) { var n = e.getDate(), r = e.getMonth() + 1, a = e.getFullYear(), i = function (e) { return e.toString().padStart(2, "0") }, s = this.options.locale || "en-US", l = new Intl.DateTimeFormat(s, { month: "short" }).format(e), d = new Intl.DateTimeFormat(s, { month: "long" }).format(e); return t.replace(/dd/g, i(n)).replace(/d(?![a-z])/g, n).replace(/MMMM/g, d).replace(/MMM/g, l).replace(/MM/g, i(r)).replace(/M(?![a-z])/g, r).replace(/yyyy/g, a).replace(/yy/g, String(a).slice(-2)) } }, { key: "addDay", value: function (e, t) { var n = new Date(e + "T00:00:00"); return n.setDate(n.getDate() + t), this._getDateString(n.getFullYear(), n.getMonth(), n.getDate()) } }, { key: "_getDateString", value: function (e, t, n) { return "".concat(e, "-").concat(String(t + 1).padStart(2, "0"), "-").concat(String(n).padStart(2, "0")) } }, { key: "isDateInRange", value: function (e) { return this.ranges.some(function (t) { return e >= t.start && e <= t.end }) } }, { key: "isDateDisabled", value: function (e) { var t = e.toISOString().split("T")[0]; if (this.options.disabledDates.some(function (e) { return e === t })) return !0; var r, a = n(this.options.disabledDates); try { for (a.s(); !(r = a.n()).done;) { var i = r.value; if (i && i.from && i.to && t >= i.from && t <= i.to) return !0 } } catch (e) { a.e(e) } finally { a.f() } var s = new Date; return s.setHours(0, 0, 0, 0), !!(this.options.disablePast && e < s) || (!!(this.options.disableFuture && e > s) || (!!(this.options.minDate && t < this.options.minDate) || !!(this.options.maxDate && t > this.options.maxDate))) } }, { key: "simplifyRanges", value: function () { if (!(this.ranges.length < 2)) { this.ranges.sort(function (e, t) { return e.start.localeCompare(t.start) }); for (var e = [this.ranges[0]], t = 1; t < this.ranges.length; t++) { var n = this.ranges[t], r = e[e.length - 1], a = this.addDay(r.end, 1); n.start <= r.end || n.start === a ? r.end = n.end > r.end ? n.end : r.end : e.push(n) } this.ranges = e } } }, { key: "addRanges", value: function (e) { var t, r = this, a = n(e); try { var i = function () { var e = t.value; r.ranges.some(function (t) { return e.start >= t.start && e.end <= t.end }) || r.ranges.push(e) }; for (a.s(); !(t = a.n()).done;)i() } catch (e) { a.e(e) } finally { a.f() } this.simplifyRanges() } }, { key: "attachEventListeners", value: function () { this.inputElement.addEventListener("click", this.show), document.addEventListener("mousedown", this.handleOutsideClick) } }]) }(); return s
});
//# sourceMappingURL=flexidatepicker.umd.min.js.map
